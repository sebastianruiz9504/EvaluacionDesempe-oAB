@using EvaluacionDesempenoAB.Models

@{
    ViewData["Title"] = "Iniciar evaluación";

    var usuario = ViewBag.Usuario as UsuarioEvaluado;
    var niveles = ViewBag.Niveles as List<NivelEvaluacion>;
}

@if (usuario is null || niveles is null)
{
    <div class="alert alert-danger">
        No se pudo cargar la información del usuario o de los niveles.
    </div>
}
else
{
    <h1 class="h4 ab-heading mb-3">Iniciar evaluación</h1>

    <div class="card shadow-sm border-0 mb-4">
        <div class="card-body">
            <div class="row g-2">
                <div class="col-md-4">
                    <div class="small text-muted">Usuario</div>
                    <div class="fw-semibold">@usuario.NombreCompleto</div>
                </div>
                <div class="col-md-3">
                    <div class="small text-muted">Cédula</div>
                    <div class="fw-semibold">@usuario.Cedula</div>
                </div>
                <div class="col-md-3">
                    <div class="small text-muted">Cargo</div>
                    <div>@usuario.Cargo</div>
                </div>
            </div>
        </div>
    </div>

    <p class="mb-3">Selecciona el tipo de evaluación que deseas realizar para este usuario:</p>

    <div class="row g-3">
        @foreach (var nivel in niveles)
        {
            <div class="col-md-6 col-lg-3">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-body d-flex flex-column">
                        <h2 class="h6 ab-heading">@nivel.Nombre</h2>
                        @if (!string.IsNullOrWhiteSpace(nivel.Descripcion))
                        {
                            <p class="small text-muted mb-3">@nivel.Descripcion</p>
                        }
                        <div class="mt-auto">
                            <a class="btn btn-sm btn-primary"
                               asp-action="Formulario"
                               asp-route-usuarioId="@usuario.Id"
                               asp-route-nivelId="@nivel.Id">
                                Iniciar evaluación
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
}
